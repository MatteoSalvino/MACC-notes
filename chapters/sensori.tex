\chapter{Sensori}
I sensori permettono di essere consapevoli dell'ambiente (dove siamo, come ci muoviamo, etc.). Queste informazioni arricchiscono il modo in cui un utente interagisce con lo smartphone. Loro sono dei micro sistemi elettro-meccanici, utilizzati per misurare delle quantità fisiche. In particolare, sono costituiti da due parti:
\begin{itemize}
\item \textbf{Parte meccanica}: essa sfrutta qualche legge fisica
\item \textbf{Parte Elettrica}: essa viene utilizzata per trasdurre la quantità meccanica in un valore elettrico leggibile (per esempio l'accelerazione in volts).
\end{itemize}
Le figure principali di merito di un sensore sono:
\begin{itemize}
\item \textbf{Sensitività}: il voltaggio del segnale di output generato per unità di input
\item \textbf{Larghezza di banda}: l'intervallo delle frequenze nel quale la sensitività rimane costante all'intervallo della banda di tolleranza
\item \textbf{Risoluzione}: il più piccolo incremento di accelerazione misurabile
\item \textbf{Intervallo di misura}: ad esempio +/- 3g
\item \textbf{Rumore}: il più basso valore che può essere letto prima che i dati vengano sovrapposti al rumore elettrico.
\end{itemize}
Un tipo di sensore è il \textbf{sensore inerziale}, il quale sfrutta il concetto di inerzia e la classica legge di newton $F = m\cdot a$. Un'altro tipo di sensore è quello di \textbf{gravità}, il quale sfrutta la legge di gravitazione universale. La sensitività del sensore risulta pari $\frac{M}{K}$. La frequenza naturale è $\omega_n = \sqrt[2]{\frac{K}{M}}$, la quale diminuisce con la sensitività. Un'altro tipo di sensore è il \textbf{sensore giroscopio}, il quale sfrutta la forza di Coriolis. La forza può essere facilmente compresa grazie alla conservazione del momento della forza. Si tratta di una forza apparente che una massa vede quando ad esempio si muove su una traiettoria circolare. Sfortunatamente il magnetometro di uno smartphone non misura solamente il campo magnetico della Terra. Molto spesso in ambienti interni siamo in presenza di dipoli magnetici, i quali perturbano la misura del campo magnetico terrestre. Queste perturbazioni possono esser causate da dispositivi elettromagnetici, strutture oppure altre oggetti ferro magnetici come chiavi, etc. Il \textbf{sensore NFC} si basa sul seguente principio: un campo magnetico variabile $B_1$ generato in una bobina da una corrente variabile potrebbe indurre un'altro campo variabile $B_2$ in un'altra bobina. L'effetto netto della forza di Lorentz nella seconda bobina è una forza elettromotrice. L'energia può essere allora trasferita da un circuito ad un altro. Tale campo trasporta energia che potrebbe attivare un semplice circuito elettronico privo di batteria. Tale circuito potrebbe eseguire delle semplici computazioni e memorizzare i dati. Uno smartphone agisce con un circuito attivo fornendo l'energia. Il circuito passivo viene attivato quando il circuito attivo è abbastanza vicino in modo tale che possano comunicare oppure memorizzare dati. Le lettura dai sensori sono misurate utilizzando il framework del dispositivo.Il \textbf{problema di Wahba} descrive il problema di trovare la matrice di rotazione ottimale partendo da differenti misure (affette da errori o rumore). Ottenere una rotazione precisa è molto importante visto che essa determina la rotazione del dispositivo. La matrice di rotazione contiene tutte le informazioni per determinare l'orientazione. Ogni orientazione può essere espressa come una sequenza di tre differenti rotazioni lungo tre assi differenti (angolo di Eulero) $R = R_x \cdot R_y \cdot R_z$. Possiamo definire diverse tipologie di angolo:
\begin{itemize}
\item \textbf{Azimuth}: l'angolo tra la direzione attuale del compasso del dispositivo e il nord magnetico.
\item \textbf{Pitch}: l'angolo tra il piano parallelo allo schermo del dispositivo e il piano parallelo al terreno.
\item \textbf{Roll}: l'angolo tra il piano perpendicolare allo schermo del dispositivo e il piano parallelo al terreno.
\end{itemize}
I \textbf{quaternioni} sono la generalizzazione di numeri complessi. Le loro unità possono essere utilizzate per rappresentare l'orientazione. L'orientazione è fornita come un vettore e un angolo di rotazione. Tre componenti rappresentano il vettore e una componente l'angolo. Quindi è preferibile rispetto alla matrice di rotazione (4 scalari invece di 9). L' area disponibile per mostrare l'applicazione è chiamata \textbf{viewport}. Un'altro sensore è il \textbf{GPS}, il quale è costituito da tre segmenti: il segmento spaziale, il segmento di controllo e il segmento utente. L'aeronautica militare degli stati uniti sviluppa, gestisce e opera il segmento spaziale e il segmento di controllo. Il segmento spaziale comprende da 24 a 32 satelliti. Il segmento di controllo di compone di una stazione di controllo principale, una stazione di controllo alternativa, varie antenne dedicate e condivise e stazioni di monitoraggio. Il segmento utente infine è composto dai ricevitori GPS. Il principio di funzionamento si basa su un metodo di posizione sferico chiamato \textbf{trilaterazione}, che parte dalla misura del tempo impiegato da un segnale radio a percorrere la distanza satellite-ricevitore. Poiché il ricevitore non conosce il momento in cui è stato trasmesso il segnale dal satellite, per il calcolo della differenza dei tempi il segnale inviato dal satellite è di tipo orario, grazie all'orologio atomico presente sul satellite: il ricevitore calcola l'esatta distanza di propagazione dal satellite a partire dalla differenza tra l'orario pervenuto e quello del proprio orologio sincronizzato con quello a bordo del satellite, tenendo conto della velocità di propagazione del segnale. L'orologio a bordo dei ricevitori GPS è però molto meno sofisticato di quello a bordo dei satelliti e deve essere frequentemente corretto. La sincronizzazione di questo orologio avviene all'accensione del dispositivo ricevente, utilizzando le informazioni che arrivano da un quarto satellite. Se il ricevitore avesse la stessa tipologia di orologio presente nei satelliti, sarebbero sufficienti le informazioni fornite da tre satelliti, ma nella realtà non è così e quindi il ricevitore deve risolvere un sistema di quattro incognite (longitudine, latitudine, altitudine e tempo).
